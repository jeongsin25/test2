require=function o(a,s,h){function d(t,e){if(!s[t]){if(!a[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(r)return r(t,!0);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}var n=s[t]={exports:{}};a[t][0].call(n.exports,function(e){return d(a[t][1][e]||e)},n,n.exports,o,a,s,h)}return s[t].exports}for(var r="function"==typeof require&&require,e=0;e<h.length;e++)d(h[e]);return d}({ballCollider:[function(e,t,i){"use strict";cc._RF.push(t,"d4253nWlAFFMZsik65O1xmA","ballCollider"),Object.defineProperty(i,"__esModule",{value:!0});var u=e("./gamemanager"),c=cc._decorator,n=c.ccclass,o=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gamemanager=null,e.active=!0,e.drop=!1,e.mergeDelayCheck=!1,e}return __extends(e,t),(p=e).prototype.onLoad=function(){var e=cc.director.getCollisionManager();e.enabled=!0,e.enabledDrawBoundingBox=!0},e.prototype.onCollisionEnter=function(e,t){if("boxCollider_left"!==e.node.name&&"boxCollider_right"!==e.node.name){var c=t.node.parent.parent,i=c.getChildByName("gameScreen"),n=c.getChildByName("background").getChildByName("nextBackground").getChildByName("nextBall");if(this.drop&&"boxCollider_top"!==e.node.name&&"boxCollider_warning"!==e.node.name){this.drop=!1,c.getComponent(u.default).copyBall();var o=cc.scaleTo(.1,0).easing(cc.easeQuadraticActionOut()),a=cc.callFunc(function(e){for(var t=Math.floor(5*Math.random());0===(t=Math.floor(5*Math.random()))||1===t;);0===c.getComponent(u.default).skin?n.children[0].getComponent(cc.Sprite).spriteFrame=c.getComponent(u.default).mergeImage[t]:1===c.getComponent(u.default).skin&&(n.children[0].getComponent(cc.Sprite).spriteFrame=c.getComponent(u.default).mergeImage2[t]),n.children[0].setContentSize(140,140);var i=cc.scaleTo(.1,.35).easing(cc.easeQuadraticActionOut());e.runAction(i),c.getComponent(u.default).touchcheck=0}),s=cc.sequence(o,a);n.children[0].runAction(s)}if(t.node.getComponent(cc.Sprite).spriteFrame===e.node.getComponent(cc.Sprite).spriteFrame&&this.active&&e.node.getComponent(p).active&&!this.mergeDelayCheck&&!e.node.getComponent(p).mergeDelayCheck&&!c.getComponent(u.default).isfail){var h=cc.view.getVisibleSize(),d=parseInt(e.node.getComponent(cc.Sprite).spriteFrame.name);if(0===c.getComponent(u.default).skin)var r=cc.instantiate(c.getComponent(u.default).mergePrefab[d+1]);else if(1===c.getComponent(u.default).skin)r=cc.instantiate(c.getComponent(u.default).mergePrefab2[d+1]);var l=new cc.Vec2((t.node.position.x+e.node.position.x)/2,(t.node.position.y+e.node.position.y)/2);r.setPosition(l);var g=c.getChildByName("gameBox");r.scale=h.width/g.children[0].width*.75,t.node.destroy(),e.node.destroy(),this.active=!1,e.node.getComponent(p).active=!1,i.addChild(r),r.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,.8<=g.scale&&(r.scale=.75*c.getComponent(u.default).screenScale),1450<=h.width&&(r.scale=.75);var m=r.scale;o=cc.scaleTo(.1,r.scale+r.scale/10).easing(cc.easeQuadraticActionOut()),a=cc.callFunc(function(e){var t=cc.scaleTo(.1,m).easing(cc.easeQuadraticActionOut());e.runAction(t)}),s=cc.sequence(o,a);r.runAction(s),"10"===r.getComponent(cc.Sprite).spriteFrame.name&&c.getComponent(u.default).success(),r.getComponent(p).mergeDelay(r),c.getComponent(u.default).mergeEffect(l,r.width),c.getComponent(u.default).soundsData(2)}}},e.prototype.onCollisionStay=function(e,t){var i=cc.view.getVisibleSize(),c=t.node.parent.parent,n=c.getChildByName("gameBox"),o=c.getChildByName("gameScreen");if("boxCollider_left"===e.node.name||"boxCollider_right"===e.node.name||c.getComponent(u.default).warningError<50)c.getComponent(u.default).warningError+=1;else{this.drop||"boxCollider_warning"!==e.node.name||c.getComponent(u.default).fadeWarning||(c.getComponent(u.default).fadeWarning=!0,c.getComponent(u.default).warning(t.node));i.width,n.children[0].width,t.node.getPositionY(),i.width,n.children[0].width;if(.8<=n.scale&&(276*c.getComponent(u.default).screenScale,t.node.getPositionY()*c.getComponent(u.default).screenScale),1450<=i.width&&(276,t.node.getPositionY()),this.drop||"boxCollider_top"!==e.node.name||c.getComponent(u.default).failed(),t.node.getComponent(cc.Sprite).spriteFrame===e.node.getComponent(cc.Sprite).spriteFrame&&this.active&&e.node.getComponent(p).active&&!this.mergeDelayCheck&&!e.node.getComponent(p).mergeDelayCheck&&!c.getComponent(u.default).isfail){i=cc.view.getVisibleSize();var a=parseInt(e.node.getComponent(cc.Sprite).spriteFrame.name);if(0===c.getComponent(u.default).skin)var s=cc.instantiate(c.getComponent(u.default).mergePrefab[a+1]);else if(1===c.getComponent(u.default).skin)s=cc.instantiate(c.getComponent(u.default).mergePrefab2[a+1]);var h=new cc.Vec2((t.node.position.x+e.node.position.x)/2,(t.node.position.y+e.node.position.y)/2);s.setPosition(h);n=c.getChildByName("gameBox");s.scale=i.width/n.children[0].width*.75,t.node.destroy(),e.node.destroy(),this.active=!1,e.node.getComponent(p).active=!1,o.addChild(s),s.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,.8<=n.scale&&(s.scale=.75*c.getComponent(u.default).screenScale),1450<=i.width&&(s.scale=.75);var d=s.scale,r=cc.scaleTo(.1,s.scale+s.scale/10).easing(cc.easeQuadraticActionOut()),l=cc.callFunc(function(e){var t=cc.scaleTo(.1,d).easing(cc.easeQuadraticActionOut());e.runAction(t)}),g=cc.sequence(r,l);s.runAction(g),"10"===s.getComponent(cc.Sprite).spriteFrame.name&&c.getComponent(u.default).success(),s.getComponent(p).mergeDelay(s),c.getComponent(u.default).mergeEffect(h,s.width),c.getComponent(u.default).soundsData(2)}}},e.prototype.mergeDelay=function(e){e.getComponent(p).mergeDelayCheck=!0,this.scheduleOnce(function(){e.getComponent(p).mergeDelayCheck=!1},.1)},e.prototype.start=function(){},e.prototype.update=function(e){},e=p=__decorate([n],e);var p}(cc.Component));i.default=o,cc._RF.pop()},{"./gamemanager":"gamemanager"}],gamemanager:[function(e,t,i){"use strict";cc._RF.push(t,"eb6ecdU/wZBA5BKNvYl3WSX","gamemanager"),Object.defineProperty(i,"__esModule",{value:!0});var s=e("./ballCollider"),c=cc._decorator,n=c.ccclass,o=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mergeImage=[],e.mergePrefab=[],e.mergeImage2=[],e.mergePrefab2=[],e.effectsImage=[],e.effectsAnimation=[],e.sounds=[],e.touchcheck=0,e.lastTouchPosX=0,e.sizeChange=0,e.isfail=!1,e.fadeWarning=!1,e.warningError=0,e.endBlackscreen=!1,e.touchStop=!1,e.screenScale=.8,e.shineMove=!1,e.skin=0,e}return __extends(e,t),e.prototype.onLoad=function(){cc.director.getPhysicsManager().enabled=!0},e.prototype.start=function(){this.startGame()},e.prototype.onReadyCallback=function(){},e.prototype.startGame=function(){this.screensize(),this.setting(),this.warningSetting(),this.nextBall(),this.lineDraw(),this.startScreen(),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchEnd,this)},e.prototype.setting=function(){var e=cc.view.getVisibleSize(),t=this.node.getChildByName("background"),i=t.getChildByName("woodDown"),c=t.getChildByName("table"),n=t.getChildByName("woodUp"),o=this.node.getChildByName("gameBox");0===this.skin?c.getComponent(cc.Sprite).spriteFrame=this.effectsImage[10]:1===this.skin&&(c.getComponent(cc.Sprite).spriteFrame=this.effectsImage[11]),0===this.skin?t.getComponent(cc.Graphics).fillColor=new cc.Color(248,227,179,255):1===this.skin&&(t.getComponent(cc.Graphics).fillColor=new cc.Color(248,227,179,255)),t.getComponent(cc.Graphics).fillRect(e.width/2*-1,e.height/2*-1,e.width,e.height),i.setContentSize(e.width,i.getContentSize().height),c.setContentSize(e.width,c.getContentSize().height);var a=Math.floor(e.width/n.children[0].width);if(1<=a){var s=n.children[0].getComponent(cc.Sprite).spriteFrame;n.removeChild(n.children[0]);for(var h=0;h<a+1;h++){var d=new cc.Node;n.addChild(d)}if(a%2==0)for(h=0;h<a+1;h++){(d=new cc.Node).addComponent(cc.Sprite).spriteFrame=s;var r=h%2==1?697*Math.ceil(h/2):-697*Math.ceil(h/2);d.setPositionX(r),n.addChild(d)}else for(h=0;h<(a+1)/2;h++)for(var l=0;l<2;l++){if((d=new cc.Node).addComponent(cc.Sprite).spriteFrame=s,0===l)r=697*h+348.5;else r=-1*(697*h+348.5);d.setPositionX(r),n.addChild(d)}}var g=t.getChildByName("mission"),m=g.getChildByName("missionBall");0===this.skin?m.getComponent(cc.Sprite).spriteFrame=this.mergeImage[10]:1===this.skin&&(m.getComponent(cc.Sprite).spriteFrame=this.mergeImage2[10]),o.scale=e.width/o.children[0].width;var p=this.node.getChildByName("boxCollider_top"),u=this.node.getChildByName("boxCollider_bottom"),w=this.node.getChildByName("boxCollider_left"),C=this.node.getChildByName("boxCollider_right"),f=this.node.getChildByName("boxCollider_warning");p.scale=e.width/o.children[0].width,u.scale=e.width/o.children[0].width,w.scale=e.width/o.children[0].width,C.scale=e.width/o.children[0].width,f.scale=e.width/o.children[0].width;var y=this.node.getChildByName("gameScreen");if(0===this.skin)var v=cc.instantiate(this.mergePrefab[2]);else if(1===this.skin)v=cc.instantiate(this.mergePrefab2[2]);v.scale=e.width/o.children[0].width*.75,v.setPositionY(e.width/o.children[0].width*750),y.insertChild(v,0);var S=cc.director.getPhysicsManager();(S.enabled=!0,.8<=o.scale?(o.scale=.8,p.scale=.8,u.scale=.8,w.scale=.8,C.scale=.8,f.scale=.8,v.scale=.75*this.screenScale,v.setPositionY(750*this.screenScale),S.gravity=cc.v2(0,-2e3*this.screenScale)):S.gravity=cc.v2(0,-2e3*e.width/o.children[0].width),1450<=e.width)&&(o.scale=1,p.scale=1,u.scale=1,w.scale=1,C.scale=1,f.scale=1,v.scale=.75,v.setPositionY(750),S.gravity=cc.v2(0,-2e3),g.setPositionX(-1*(e.width/2-e.width/6)),t.getChildByName("ring").setPositionX(-1*(e.width/2-e.width/6)));for(h=0;h<3;h++){if(0===this.skin)v=cc.instantiate(this.mergePrefab[9-h]);else if(1===this.skin)v=cc.instantiate(this.mergePrefab2[9-h]);switch(v.scale=e.width/o.children[0].width*.75,h){case 0:v.setPosition(e.width/o.children[0].width*140,e.width/o.children[0].width*180),.8<=o.scale&&(v.scale=.75*this.screenScale,v.setPosition(140*this.screenScale,180*this.screenScale)),1450<=e.width&&(v.scale=.75,v.setPosition(140,180));break;case 1:v.setPosition(e.width/o.children[0].width*-135,e.width/o.children[0].width*260),.8<=o.scale&&(v.scale=.75*this.screenScale,v.setPosition(-135*this.screenScale,260*this.screenScale)),1450<=e.width&&(v.scale=.75,v.setPosition(-135,260));break;case 2:v.setPosition(e.width/o.children[0].width*-185,e.width/o.children[0].width*495),.8<=o.scale&&(v.scale=.75*this.screenScale,v.setPosition(-185*this.screenScale,495*this.screenScale)),1450<=e.width&&(v.scale=.75,v.setPosition(-185,495))}y.addChild(v),console.log(y.children),v.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic}},e.prototype.screensize=function(){var e=cc.view.getVisibleSize();0===this.sizeChange&&(e.width<1450?this.sizeChange=1:1450<=e.width&&(this.sizeChange=2,"main2"!==cc.director.getScene().name&&cc.director.loadScene("main2"))),cc.view.setResizeCallback(function(){cc.view.getVisibleSize().width<1450?cc.director.loadScene("main"):cc.director.loadScene("main2")})},e.prototype.onTouchStart=function(e){if(!this.touchStop&&0===this.touchcheck){this.node.getChildByName("gameScreen").children[0].opacity=255,this.node.getChildByName("startScreen").active=!1;var t=this.node.convertToNodeSpaceAR(e.getLocation()),i=this.node.getChildByName("background").getChildByName("line"),c=this.node.getChildByName("gameBox"),n=this.node.getChildByName("gameScreen"),o=this.node.getChildByName("boxCollider_left"),a=n.children[0];a.setPositionX(t.x),t.x>c.children[0].width*c.scale/2-a.width*a.scale/2-o.height*c.scale?a.setPositionX(c.children[0].width*c.scale/2-a.width*a.scale/2-o.height*c.scale):t.x<-1*(c.children[0].width*c.scale/2-a.width*a.scale/2-o.height*c.scale)&&a.setPositionX(-1*(c.children[0].width*c.scale/2-a.width*a.scale/2-o.height*c.scale)),i.active=!0,i.setPositionX(a.getPositionX()),this.touchcheck=1}},e.prototype.onTouchMove=function(e){if(!this.touchStop&&1===this.touchcheck){var t=this.node.convertToNodeSpaceAR(e.getLocation()),i=this.node.getChildByName("background").getChildByName("line"),c=this.node.getChildByName("gameBox"),n=this.node.getChildByName("gameScreen"),o=this.node.getChildByName("boxCollider_left"),a=n.children[0];a.setPositionX(t.x),t.x>c.children[0].width*c.scale/2-a.width*a.scale/2-o.height*c.scale?a.setPositionX(c.children[0].width*c.scale/2-a.width*a.scale/2-o.height*c.scale):t.x<-1*(c.children[0].width*c.scale/2-a.width*a.scale/2-o.height*c.scale)&&a.setPositionX(-1*(c.children[0].width*c.scale/2-a.width*a.scale/2-o.height*c.scale)),i.setPositionX(a.getPositionX())}},e.prototype.onTouchEnd=function(e){if(!this.touchStop&&1===this.touchcheck){var t=this.node.convertToNodeSpaceAR(e.getLocation()),i=this.node.getChildByName("background").getChildByName("line"),c=this.node.getChildByName("gameBox"),n=this.node.getChildByName("gameScreen"),o=this.node.getChildByName("boxCollider_left"),a=n.children[0];a.setPositionX(t.x),a.getComponent(s.default).drop=!0,t.x>c.children[0].width*c.scale/2-a.width*a.scale/2-o.height*c.scale?a.setPositionX(c.children[0].width*c.scale/2-a.width*a.scale/2-o.height*c.scale):t.x<-1*(c.children[0].width*c.scale/2-a.width*a.scale/2-o.height*c.scale)&&a.setPositionX(-1*(c.children[0].width*c.scale/2-a.width*a.scale/2-o.height*c.scale)),i.active=!1,i.setPositionX(a.getPositionX()),this.lastTouchPosX=a.getPositionX(),this.touchcheck=2,a.getComponent(cc.RigidBody).type=cc.RigidBodyType.Dynamic,this.soundsData(1)}},e.prototype.nextBall=function(){for(var e=Math.floor(5*Math.random());0===(e=Math.floor(5*Math.random()))||1===e;);var t=new cc.Node;t.setPosition(new cc.Vec2(-43.55,0)),t.scale=.35,0===this.skin?t.addComponent(cc.Sprite).spriteFrame=this.mergeImage[e]:1===this.skin&&(t.addComponent(cc.Sprite).spriteFrame=this.mergeImage2[e]),t.addComponent(cc.Widget).left=5;var i=this.node.getChildByName("background").getChildByName("nextBackground").getChildByName("nextBall");i.addChild(t),i.children[0].setContentSize(140,140);var c=function(e){var t=cc.scaleTo(.1,.35).easing(cc.easeQuadraticActionOut());e.runAction(t)},n=cc.scaleTo(.1,.4).easing(cc.easeQuadraticActionOut());c(t);var o=cc.callFunc(c),a=cc.sequence(n,o);t.runAction(a)},e.prototype.copyBall=function(){var e=cc.view.getVisibleSize(),t=this.node.getChildByName("background"),i=this.node.getChildByName("gameBox"),c=t.getChildByName("nextBackground").getChildByName("nextBall"),n=this.node.getChildByName("gameScreen");if(0===this.skin)var o=cc.instantiate(this.mergePrefab[c.children[0].getComponent(cc.Sprite).spriteFrame.name]);else if(1===this.skin)o=cc.instantiate(this.mergePrefab2[c.children[0].getComponent(cc.Sprite).spriteFrame.name]);o.scale=0,o.setPositionX(this.lastTouchPosX),o.setPositionY(e.width/i.children[0].width*750);var a=e.width/i.children[0].width*.75;.8<=i.scale&&(a=.75*this.screenScale,o.setPositionY(750*this.screenScale)),1450<=e.width&&(a=.75,o.setPositionY(750)),n.insertChild(o,0);var s=function(e){var t=cc.scaleTo(.15,a).easing(cc.easeQuadraticActionOut());e.runAction(t)},h=cc.scaleTo(.15,a+a/10).easing(cc.easeQuadraticActionOut());s(o);var d=cc.callFunc(s),r=cc.sequence(h,d);o.runAction(r)},e.prototype.lineDraw=function(){var e=cc.view.getVisibleSize(),t=this.node.getChildByName("background"),i=this.node.getChildByName("gameBox"),c=t.getChildByName("line").getComponent(cc.Graphics);c.lineWidth=e.width/i.children[0].width*4,c.strokeColor=cc.color(255,255,255,255);var n=this.lastTouchPosX,o=e.width/i.children[0].width*750,a=e.width/i.children[0].width*0,s=e.width/i.children[0].width*5,h=e.width/i.children[0].width*10;.8<=i.scale&&(c.lineWidth=4*this.screenScale,o=750*this.screenScale,a=0,s=5*this.screenScale,h=10*this.screenScale),1450<=e.width&&(c.lineWidth=4,o=750,a=0,s=5,h=10);for(var d=o;a<=d;)c.moveTo(n,d),d-=s,c.lineTo(n,d),d-=h;c.stroke()},e.prototype.mergeEffect=function(e,t){var i=cc.view.getVisibleSize(),c=this.node.getChildByName("gameBox"),n=this.node.getChildByName("effectScreen"),o=new cc.Node;n.addChild(o),o.addComponent(cc.Sprite),o.getComponent(cc.Sprite).spriteFrame=this.effectsImage[0],o.scale=.4,o.position=new cc.Vec2(e.x,e.y-345),o.setContentSize(t*(i.width/c.children[0].width),t*(i.width/c.children[0].width)),.8<=c.scale&&o.setContentSize(t*this.screenScale,t*this.screenScale),1450<=i.width&&o.setContentSize(t,t);var a=function(e){var t=cc.fadeTo(.8,0).easing(cc.easeQuadraticActionOut());t.setTag(2),e.runAction(t)},s=cc.scaleTo(1,1.5).easing(cc.easeQuadraticActionOut());s.setTag(1),a(o);var h=cc.callFunc(a),d=cc.sequence(s,h);o.runAction(d);for(var r=0;r<16;r++){o=new cc.Node;n.addChild(o),o.addComponent(cc.Sprite),o.addComponent(cc.Animation);var l=o.getComponent(cc.Animation),g=l.defaultClip=this.effectsAnimation[0];l.addClip(g);var m=Math.floor(360*Math.random())*Math.PI/180,p=t/2*Math.cos(m)*Math.random(),u=t/2*Math.sin(m)*Math.random(),w=e.x+p,C=e.y-345+u;o.scale=t*(i.width/c.children[0].width)*.004,o.position=new cc.Vec2(w,C),o.setContentSize(t*(i.width/c.children[0].width),t*(i.width/c.children[0].width)),.8<=c.scale&&(o.scale=.004*t*this.screenScale),1450<=i.width&&(o.scale=.004*t);var f=cc.moveTo(1,new cc.Vec2(w+p,C+u)).easing(cc.easeQuadraticActionInOut()),y=cc.rotateTo(1,90).easing(cc.easeQuadraticActionInOut()),v=cc.scaleTo(1,0).easing(cc.easeQuadraticActionInOut());o.runAction(f),o.runAction(y),o.runAction(v),o.getComponent(cc.Animation).play(g.name)}},e.prototype.watermelonShine=function(){var e=cc.view.getVisibleSize(),t=this.node.getChildByName("shine"),i=this.node.getChildByName("gameBox");t.scale=e.width/i.children[0].width*1,.8<=i.scale&&(t.scale=1*this.screenScale),1450<=e.width&&(t.scale=1),t.active=!0,this.shineMove=!0,this.watermelonShineRotate(),this.watermelonShineFadeInOut()},e.prototype.watermelonShineRotate=function(){var e=this.node.getChildByName("shine"),c=e.getChildByName("1_1"),n=e.getChildByName("1_2"),o=function(){var e=cc.rotateBy(10,90).easing(cc.easeQuadraticActionInOut()),t=cc.callFunc(function(){o()}),i=cc.sequence(e,t);c.runAction(i)},a=function(){var e=cc.rotateBy(10,90).easing(cc.easeQuadraticActionInOut()),t=cc.callFunc(function(){a()}),i=cc.sequence(e,t);n.runAction(i)};o(),a()},e.prototype.watermelonShineFadeInOut=function(){var e=this.node.getChildByName("shine"),c=e.getChildByName("1_1"),n=e.getChildByName("1_2"),o=function(){var e=cc.fadeTo(1,0).easing(cc.easeQuadraticActionInOut()),t=cc.callFunc(function(){var e=cc.fadeTo(1,255).easing(cc.easeQuadraticActionInOut()),t=cc.callFunc(function(){o()}),i=cc.sequence(e,t);c.runAction(i)}),i=cc.sequence(e,t);c.runAction(i)},a=function(){var e=cc.fadeTo(1,255).easing(cc.easeQuadraticActionInOut()),t=cc.callFunc(function(){var e=cc.fadeTo(1,0).easing(cc.easeQuadraticActionInOut()),t=cc.callFunc(function(){a()}),i=cc.sequence(e,t);n.runAction(i)}),i=cc.sequence(e,t);n.runAction(i)};o(),a()},e.prototype.warningSetting=function(){for(var e=cc.view.getVisibleSize(),t=this.node.getChildByName("warning"),i=t.opacity=0;i<4;i++){(s=new cc.Node).addComponent(cc.Sprite),s.getComponent(cc.Sprite).spriteFrame=this.effectsImage[7],s.width=.5*s.width,s.height=.5*s.height;var c=Math.ceil(e.width/s.width),n=Math.ceil(e.height/s.height);switch(i){case 0:for(var o=0;o<n;o++)for(var a=0;a<2;a++)if(0===a){var s=new cc.Node;t.addChild(s),s.addComponent(cc.Sprite),s.getComponent(cc.Sprite).spriteFrame=this.effectsImage[7],s.width=.5*s.width,s.height=.5*s.height,s.setPositionX(e.width/2-s.width/2),s.setPositionY(s.height/2+s.height*o)}else{s=new cc.Node;t.addChild(s),s.addComponent(cc.Sprite),s.getComponent(cc.Sprite).spriteFrame=this.effectsImage[7],s.width=.5*s.width,s.height=.5*s.height,s.setPositionX(e.width/2-s.width/2),s.setPositionY(-1*(s.height/2+s.height*o))}break;case 1:for(o=0;o<n;o++)for(a=0;a<2;a++)if(0===a){s=new cc.Node;t.addChild(s),s.addComponent(cc.Sprite),s.getComponent(cc.Sprite).spriteFrame=this.effectsImage[7],s.rotation=180,s.width=.5*s.width,s.height=.5*s.height,s.setPositionX(-1*(e.width/2-s.width/2)),s.setPositionY(s.height/2+s.height*o)}else{s=new cc.Node;t.addChild(s),s.addComponent(cc.Sprite),s.getComponent(cc.Sprite).spriteFrame=this.effectsImage[7],s.rotation=180,s.width=.5*s.width,s.height=.5*s.height,s.setPositionX(-1*(e.width/2-s.width/2)),s.setPositionY(-1*(s.height/2+s.height*o))}break;case 2:for(o=0;o<c;o++)for(a=0;a<2;a++)if(0===a){s=new cc.Node;t.addChild(s),s.addComponent(cc.Sprite),s.getComponent(cc.Sprite).spriteFrame=this.effectsImage[7],s.rotation=90,s.width=.5*s.width,s.height=.5*s.height,s.setPositionX(s.height/2+s.height*o),s.setPositionY(-1*(e.height/2-s.width/2))}else{s=new cc.Node;t.addChild(s),s.addComponent(cc.Sprite),s.getComponent(cc.Sprite).spriteFrame=this.effectsImage[7],s.rotation=90,s.width=.5*s.width,s.height=.5*s.height,s.setPositionX(-1*(s.height/2+s.height*o)),s.setPositionY(-1*(e.height/2-s.width/2))}break;case 3:for(o=0;o<c;o++)for(a=0;a<2;a++)if(0===a){s=new cc.Node;t.addChild(s),s.addComponent(cc.Sprite),s.getComponent(cc.Sprite).spriteFrame=this.effectsImage[7],s.rotation=270,s.width=.5*s.width,s.height=.5*s.height,s.setPositionX(s.height/2+s.height*o),s.setPositionY(e.height/2-s.width/2)}else{s=new cc.Node;t.addChild(s),s.addComponent(cc.Sprite),s.getComponent(cc.Sprite).spriteFrame=this.effectsImage[7],s.rotation=270,s.width=.5*s.width,s.height=.5*s.height,s.setPositionX(-1*(s.height/2+s.height*o)),s.setPositionY(e.height/2-s.width/2)}}}var h=this.node.getChildByName("gameBox"),d=h.getChildByName("box_2"),r=this.node.getChildByName("warningLine").getChildByName("line");r.opacity=0,r.width=e.width+300;var l=d.position.y*(e.width/h.children[0].width);.8<=h.scale&&(l=d.position.y*this.screenScale),1450<=e.width&&(l=d.position.y),r.setPosition(new cc.Vec2(d.position.x,l)),r.scale=h.scale},e.prototype.warning=function(n){var e=this.node.getChildByName("warning"),o=this,t=cc.fadeTo(1,185).easing(cc.easeQuadraticActionInOut()),i=cc.callFunc(function(e){var t=cc.fadeTo(1,0).easing(cc.easeQuadraticActionInOut()),i=cc.callFunc(function(){""===n.name&&o.node.getChildByName("gameScreen").children[0].getSiblingIndex()!==n.getSiblingIndex()||(o.fadeWarning=!1)}),c=cc.sequence(t,i);e.runAction(c)}),c=cc.sequence(t,i);e.runAction(c),this.warningLine()},e.prototype.warningLine=function(){var e=this.node.getChildByName("warningLine").getChildByName("line"),t=cc.fadeTo(1,165).easing(cc.easeQuadraticActionInOut()),i=cc.callFunc(function(e){var t=cc.fadeTo(1,0).easing(cc.easeQuadraticActionInOut());e.runAction(t)}),c=cc.sequence(t,i);e.runAction(c)},e.prototype.failed=function(){if(!this.isfail){this.isfail=!0,this.touchStop=!0;for(var e=cc.view.getVisibleSize(),t=this.node.getChildByName("gameBox"),i=this.node.getChildByName("gameScreen"),c=0;c<i.childrenCount;c++)i.children[c].getComponent(cc.RigidBody).type=cc.RigidBodyType.Static;var n=this.node.getChildByName("effectScreen");for(c=0;c<n.childrenCount;c++){var o=n.children[c].getComponent(cc.Animation);if(o){o.stop("smoke")}}var a=this.node.getChildByName("fail");a.scale=e.width/t.children[0].width*1.5,a.active=!0;var s=e.width/t.children[0].width*.8;.8<=t.scale&&(a.scale=1.5*this.screenScale,s=.8*this.screenScale),1450<=e.width&&(a.scale=1.5,s=.8),this.scheduleOnce(function(){var e=cc.fadeTo(.3,255).easing(cc.easeQuadraticActionIn());a.runAction(e);var t=cc.scaleTo(.3,s).easing(cc.easeQuadraticActionIn());a.runAction(t),this.scheduleOnce(function(){var e=cc.fadeTo(.5,0).easing(cc.easeQuadraticActionInOut());a.runAction(e),this.endGame(!1)},1),this.soundsData(3)},1),this.soundsData(5)}},e.prototype.success=function(){var e=this.node.getChildByName("background").getChildByName("mission"),t=e.getChildByName("text"),i=e.getChildByName("success");this.node.getChildByName("boxCollider_top").group="default",this.touchStop=!0,t.active=!1,i.active=!0,i.getComponent(cc.Animation).play("success"),this.watermelonShine(),this.soundsData(6),this.scheduleOnce(function(){this.perfectText(),this.soundsData(4)},.5)},e.prototype.perfectText=function(){var e=cc.view.getVisibleSize(),t=this.node.getChildByName("perfectText"),i=this.node.getChildByName("gameBox"),c=this;t.scale=e.width/i.children[0].width*1.5,t.setPositionY(e.width/i.children[0].width*150);e.width,i.children[0].width;.8<=i.scale&&(t.scale=1.5*this.screenScale,1*this.screenScale,t.setPositionY(150*this.screenScale)),1450<=e.width&&(t.scale=1.5,1,t.setPositionY(150));var n=cc.fadeTo(.3,255).easing(cc.easeQuadraticActionIn());t.runAction(n);var o=cc.scaleTo(.5,1).easing(cc.easeQuadraticActionInOut()),a=cc.callFunc(function(){c.scheduleOnce(function(){var e=cc.fadeTo(.5,0).easing(cc.easeQuadraticActionInOut());t.runAction(e),c.endGame(!0)},1)}),s=cc.sequence(o,a);t.runAction(s)},e.prototype.startScreen=function(){var e=cc.view.getVisibleSize(),t=this.node.getChildByName("startScreen"),i=this.node.getChildByName("gameScreen"),c=this.node.getChildByName("gameBox"),n=t.getChildByName("arrow"),o=t.getChildByName("mouseCursor"),a=t.getChildByName("tapToSwipe"),s=cc.instantiate(i.children[0]);s.getComponent(cc.RigidBody).type=cc.RigidBodyType.Static,s.group="default",s.setPositionX(e.width/c.children[0].width*140),t.addChild(s),i.children[0].opacity=0,n.scale=e.width/c.children[0].width*1,n.setPosition(0,e.width/c.children[0].width*245),o.scale=e.width/c.children[0].width*.5,o.setPosition(e.width/c.children[0].width*140,e.width/c.children[0].width*245),a.scale=e.width/c.children[0].width*1,a.setPosition(0,e.width/c.children[0].width*380),.8<=c.scale&&(n.scale=1*this.screenScale,n.setPosition(0,245*this.screenScale),o.scale=.5*this.screenScale,o.setPosition(140*this.screenScale,245*this.screenScale),a.scale=1*this.screenScale,a.setPosition(0,380*this.screenScale),s.setPositionX(140*this.screenScale)),1450<=e.width&&(n.scale=1,n.setPosition(0,245),o.scale=.5,o.setPosition(140*this.screenScale,245),a.scale=1,a.setPosition(0,380),s.setPositionX(140)),t.getComponent(cc.Graphics).fillColor=new cc.Color(0,0,0,185),t.getComponent(cc.Graphics).fillRect(e.width/2*-1,-1*(e.height/2-345),e.width,e.height),this.mouseCursor(),this.startScreenBall(s),this.startLineDraw()},e.prototype.mouseCursor=function(){var e=cc.view.getVisibleSize(),t=this.node.getChildByName("startScreen"),i=this.node.getChildByName("gameBox"),c=t.getChildByName("mouseCursor"),n=this,o=e.width/i.children[0].width*280;.8<=i.scale&&(o=280*this.screenScale),1450<=e.width&&(o=280);var a=cc.moveBy(2,new cc.Vec2(-1*o,0)).easing(cc.easeQuadraticActionInOut()),s=cc.callFunc(function(e){var t=cc.moveBy(2,new cc.Vec2(o,0)).easing(cc.easeQuadraticActionInOut()),i=cc.callFunc(function(){n.mouseCursor()}),c=cc.sequence(t,i);e.runAction(c)}),h=cc.sequence(a,s);c.runAction(h)},e.prototype.startScreenBall=function(n){var e=cc.view.getVisibleSize(),t=this.node.getChildByName("gameBox"),o=this,a=e.width/t.children[0].width*280;.8<=t.scale&&(a=280*this.screenScale),1450<=e.width&&(a=280);var i=cc.moveBy(2,new cc.Vec2(-1*a,0)).easing(cc.easeQuadraticActionInOut()),c=cc.callFunc(function(e){var t=cc.moveBy(2,new cc.Vec2(a,0)).easing(cc.easeQuadraticActionInOut()),i=cc.callFunc(function(){o.startScreenBall(n)}),c=cc.sequence(t,i);e.runAction(c)}),s=cc.sequence(i,c);n.runAction(s)},e.prototype.startLineDraw=function(){var e=cc.view.getVisibleSize(),t=this.node.getChildByName("startScreen"),i=this.node.getChildByName("gameBox"),c=t.getChildByName("line"),n=c.getComponent(cc.Graphics);n.lineWidth=e.width/i.children[0].width*4,n.strokeColor=cc.color(255,255,255,255);var o=e.width/i.children[0].width*280,a=e.width/i.children[0].width*750,s=e.width/i.children[0].width*250,h=e.width/i.children[0].width*5,d=e.width/i.children[0].width*10;.8<=i.scale&&(n.lineWidth=4*this.screenScale,o=280*this.screenScale,a=750*this.screenScale,s=250*this.screenScale,h=5*this.screenScale,d=10*this.screenScale),1450<=e.width&&(n.lineWidth=4,o=280,a=750,s=250,h=5,d=10);for(var r=a;s<=r;)n.moveTo(o/2,r),r-=h,n.lineTo(o/2,r),r-=d;n.stroke();var l=this,g=cc.moveBy(2,new cc.Vec2(-o,0)).easing(cc.easeQuadraticActionInOut()),m=cc.moveBy(2,new cc.Vec2(o,0)).easing(cc.easeQuadraticActionInOut()),p=cc.callFunc(function(){var e=cc.callFunc(function(){l.startLineDraw()});c.runAction(cc.sequence(m,e)),function(e,t,i,c,n,o){var a=t;for(;c<=r;)e.moveTo(a,i),a-=n,e.lineTo(a,i),a-=o;e.stroke()}(n,o,a,s,h,d)});c.runAction(cc.sequence(g,p))},e.prototype.endGame=function(e){this.endScreen(),this.logoEffect(),this.scheduleOnce(function(){this.buttonEffect(e)},.3),this.endBlackscreen=!0},e.prototype.endScreen=function(){var e=cc.view.getVisibleSize(),t=this.node.getChildByName("endScreen");t.getComponent(cc.Graphics).fillColor=new cc.Color(0,0,0,0),t.getComponent(cc.Graphics).fillRect(e.width/2*-1,-1*(e.height/2-345),e.width,e.height)},e.prototype.buttonEffect=function(e){var t=cc.view.getVisibleSize(),i=this.node.getChildByName("endScreen"),c=this.node.getChildByName("gameBox"),n=i.getChildByName("button"),o=this;n.on(cc.Node.EventType.TOUCH_START,this.onButtonStart,this),n.on(cc.Node.EventType.TOUCH_END,this.onButtonEnd,this),n.getComponent(cc.Sprite).spriteFrame=e?this.effectsImage[8]:this.effectsImage[9],n.y=t.width/c.children[0].width*100;var a=t.width/c.children[0].width*1.6,s=t.width/c.children[0].width*1.5;.8<=c.scale&&(n.y=100*this.screenScale,a=1.6*this.screenScale,s=1.5*this.screenScale),1450<=t.width&&(n.y=100,a=1.6,s=1.5);var h=cc.scaleTo(.25,a).easing(cc.easeQuadraticActionInOut()),d=cc.callFunc(function(e){var t=cc.scaleTo(.05,s).easing(cc.easeQuadraticActionInOut());e.runAction(t),o.onAdsFinished()}),r=cc.sequence(h,d);n.runAction(r)},e.prototype.logoEffect=function(){var e=cc.view.getVisibleSize(),t=this.node.getChildByName("endScreen"),i=this.node.getChildByName("gameBox"),c=t.getChildByName("logo"),n=c.getComponent(cc.Animation),o=n.defaultClip,a=e.width/i.children[0].width*1,s=e.width/i.children[0].width*0,h=e.width/i.children[0].width*550;.8<=i.scale&&(s=0,h=550*this.screenScale,a=1*this.screenScale),1450<=e.width&&(s=0,h=550,a=1),o.curveData.props.scale[0].value=new cc.Vec2(a,a),c.setPosition(s,h),n.play(o.name)},e.prototype.soundsData=function(e){var t=this.node.getChildByName("soundEffect").addComponent(cc.AudioSource);t.volume=.5,t.clip=this.sounds[e],t.play()},e.prototype.onButtonStart=function(){var e=cc.view.getVisibleSize(),t=this.node.getChildByName("gameBox"),i=this.node.getChildByName("endScreen").getChildByName("button"),c=(e.width,t.children[0].width,e.width/t.children[0].width*1.35);.8<=t.scale&&(1.5*this.screenScale,c=1.35*this.screenScale),1450<=e.width&&(1.5,c=1.35);var n=cc.scaleTo(.1,c);i.runAction(n)},e.prototype.onButtonEnd=function(){var e=cc.view.getVisibleSize(),t=this.node.getChildByName("gameBox"),i=this.node.getChildByName("endScreen").getChildByName("button"),c=e.width/t.children[0].width*1.5;e.width,t.children[0].width;.8<=t.scale&&(c=1.5*this.screenScale,this.screenScale),1450<=e.width&&(c=1.5);var n=cc.scaleTo(.1,c);i.runAction(n),this.oneLink(),this.clickUrl()},e.prototype.snow=function(c,n){for(var o=cc.view.getVisibleSize(),e=this.node.getChildByName("background").getChildByName("snow"),t=Math.floor(9*Math.random());0===(t=Math.floor(9*Math.random()))||1===t||2===t||3===t||4===t;);var a=new cc.Node;a.scale=.1*t,a.addComponent(cc.Sprite).spriteFrame=this.effectsImage[12],a.setPosition(o.width/2-o.width/2/2+c,o.height/2+a.height/2+n),e.addChild(a);var s=function(){var e=cc.moveBy(4,new cc.Vec2(o.width/2*-1,-1*(o.height+n))),t=cc.callFunc(function(){a.setPosition(o.width/2-o.width/2/2+c,o.height/2+a.height/2+n),s(),console.log(a.position)}),i=cc.sequence(e,t);a.runAction(i)};s()},e.prototype.oneLink=function(){},e.prototype.clickUrl=function(){window.playableSDK.openAppStore()},e.prototype.onAdsFinished=function(){window.playableSDK.openAppStore()},e.prototype.update=function(e){if(this.endBlackscreen){var t=this.node.getChildByName("endScreen"),i=t.getComponent(cc.Graphics).fillColor;i.getA()<180?(t.getComponent(cc.Graphics).clear(),i.setA(i.getA()+400*e),i=i,t.getComponent(cc.Graphics).fillRect(-1920,-1920,3840,3840)):this.endBlackscreen=!1}if(this.shineMove){for(var c=this.node.getChildByName("shine"),n=this.node.getChildByName("gameScreen"),o=null,a=0;a<n.childrenCount;a++)"10"===n.children[a].getComponent(cc.Sprite).spriteFrame.name&&(o=n.children[a]);c.setPosition(o.getPositionX(),o.getPositionY()-345)}},__decorate([o([cc.SpriteFrame])],e.prototype,"mergeImage",void 0),__decorate([o([cc.Prefab])],e.prototype,"mergePrefab",void 0),__decorate([o([cc.SpriteFrame])],e.prototype,"mergeImage2",void 0),__decorate([o([cc.Prefab])],e.prototype,"mergePrefab2",void 0),__decorate([o([cc.SpriteFrame])],e.prototype,"effectsImage",void 0),__decorate([o([cc.AnimationClip])],e.prototype,"effectsAnimation",void 0),__decorate([o([cc.AudioClip])],e.prototype,"sounds",void 0),e=__decorate([n],e)}(cc.Component);i.default=a,cc._RF.pop()},{"./ballCollider":"ballCollider"}]},{},["ballCollider","gamemanager"]);
//# sourceMappingURL=project.js.map